!function(a){function b(b,c){var e="templates/"+d[c.widget]+".html";a(".widget-actions > .action-edit",c.element).attr("data-remote",e),a('[data-toggle="tooltip"]',c.element).tooltip()}var c={};a.getJSON("presets.json",function(a){c=a});var d={column:"column-and-bar",bar:"column-and-bar",line:"line-and-area",area:"line-and-area",pie:"pie-and-donut",donut:"pie-and-donut",scatter:"scatter-and-bubble",bubble:"scatter-and-bubble",angularGauge:"angular-gauge",cylinderGauge:"cylinder-gauge",funnel:"funnel-and-pyramid",pyramid:"funnel-and-pyramid"},e=a("#dashboard-example").dashboard({addWidget:b,widgetBody:".panel-body",widgetHandle:".panel-heading, .panel-title, .widget-actions",widgetTitle:".panel-title"}).data("dashboard-dashboard");a.getJSON("widgets.json",function(a){e.removeAllWidgets().addWidgets(a)}),a("#modal-import-widgets").on("click",".confirm",function(){var b=JSON.parse(a('[name="import"]',"#modal-import-widgets").val());e.removeAllWidgets().addWidgets(b)}),a("#modal-export-widgets").on("show.bs.modal",function(){var b=JSON.stringify(e.serialize());a('[name="export"]',this).val(b)}),a(document).on("click",'[data-add="widget"]',function(){var b=a(this).data(),d=a(b.target).data("dashboard-dashboard"),e=b.preset?c[b.widget][b.preset]:{},f=a(this).attr("title");d.addWidget(b.widget,e,f,2,2)}),a("#modal-widget-settings").on("show.bs.modal",function(b){var c=a(b.relatedTarget);a(this).data("widget",{element:c.parents(".panel"),dashboard:c.parents(".dashboard")})}),a("#modal-widget-settings").on("loaded.bs.modal",function(){var b=a("#modal-widget-settings").data("widget"),c=b.dashboard.data("dashboard-dashboard"),d=c.getWidgetOptions(b.element);a("[name]","#modal-widget-settings form").each(function(){var b=a(this).attr("name");"checkbox"==a(this).attr("type")?a(this).prop("checked",d[b]):a(this).val(d[b])})}),a("#modal-widget-settings").on("hide.bs.modal",function(){a(this).removeData("bs.modal widget")}),a("#modal-widget-settings").on("click",".confirm",function(){var b=a("#modal-widget-settings").data("widget"),c=b.dashboard.data("dashboard-dashboard"),d={};a("[name]","#modal-widget-settings form").each(function(){var b=a(this).attr("name");d[b]="checkbox"==a(this).attr("type")?this.checked:"number"==a(this).attr("type")?Number(a(this).val()):a(this).val()}),c.setWidgetOptions(b.element,d)}),a("#modal-remove-widget").on("show.bs.modal",function(b){var c=a(b.relatedTarget);a(this).data("widget",{element:c.parents(".panel"),dashboard:c.parents(".dashboard")})}),a("#modal-remove-widget").on("hide.bs.modal",function(){a(this).removeData("widget")}),a("#modal-remove-widget").on("click",".confirm",function(){var b=a("#modal-remove-widget").data("widget"),c=b.dashboard.data("dashboard-dashboard");c.removeWidget(b.element)}),a("#modal-remove-all-widgets").on("click",".confirm",function(){e.removeAllWidgets()})}(jQuery);