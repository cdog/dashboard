!function(a){a.widget("dashboard.dashboard",{options:{widgetBody:".widget-body",widgetHandle:".widget-handle",widgetMargins:[10,10],widgetTemplate:"#widget-template",widgetTitle:".widget-title",widgetUnitSize:[225,150]},_create:function(){this.gridster=a(this.element).addClass("gridster").gridster({draggable:{handle:this.options.widgetHandle},resize:{enabled:!0,stop:a.proxy(this._resizeWidget,this)},serialize_params:a.proxy(this._serialize,this),widget_base_dimensions:this.options.widgetUnitSize,widget_margins:[this.options.widgetMargins[0]/2,this.options.widgetMargins[1]/2],widget_selector:"div"}).data("gridster")},addWidget:function(b,c,d,e,f,g,h){var i=a(this.options.widgetTemplate).html(),j=Handlebars.compile(i),k={title:d},l=j(k),m=this.gridster.add_widget(l,e,f,g,h).get(0);return a(m).data("widget",b),a(m).data("title",d),a(this.options.widgetBody,m)[b](c),this._trigger("addWidget",null,{element:m,widget:b}),m},_compareWidgets:function(a,b){return a.y>b.y?1:a.y==b.y&&a.x>b.x?1:-1},addWidgets:function(b){var c=this;b=b.sort(this._compareWidgets),a(b).each(function(){c.addWidget(this.widget,this.options,this.title,this.width,this.height,this.x,this.y)})},getWidgetOptions:function(b){var c=b.data("widget");return a(this.options.widgetBody,b)[c]("option")},setWidgetOptions:function(b,c){var d=b.data("widget");a(this.options.widgetBody,b)[d]("option",c)},removeWidget:function(a){this.gridster.remove_widget(a)},removeAllWidgets:function(){return this.gridster.remove_all_widgets(),this},_serialize:function(a,b){var c=a.data();return{widget:c.widget,options:this.getWidgetOptions(a),title:c.title,x:b.col,y:b.row,width:b.size_x,height:b.size_y}},serialize:function(){return this.gridster.serialize()},_resizeWidget:function(b,c,d){var e=d.data("widget");a(this.options.widgetBody,d)[e]("resize")},_destroy:function(){this.gridster.destroy(!0)}})}(jQuery);